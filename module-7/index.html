
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MM | Assignment 7</title>
  <meta name="description" content="A basic HTML + Python app, using Common Gateway Interface and the Apache HTTP Server.">
  <meta name="author" content="Mae Morella">
  <style>/* styles.css - by Mae Morella */
@import "https://cdn.jsdelivr.net/npm/bootstrap-reboot@4.5.4/dist/reboot.min.css";
@import "https://cdn.jsdelivr.net/gh/devicons/devicon@v2.8.2/devicon.min.css";

/* Layout */

body {
  max-width: 40em;
  margin: 0 auto;
  padding: 1rem;
}

/* Colors and dark theme */

:root {
  --font-color: #000;
  --font-shadow-color: #fff;
  --link-color: #2a70b6;
  --link-highlight-color: #0f325f;
  --bg-color: #eee;
}

[data-theme="dark"] {
  --font-color: #fff;
  --font-shadow-color: #111;
  --link-color: #cd6;
  --link-highlight-color: #ef8;
  --link-white-color: #c1bfbd;
  --bg-color: #223;
}

body {
  color: var(--font-color);
  background: var(--bg-color);
  font: 1.2rem/1.6 "Helvetica Neue", Helvetica, Arial, sans-serif;
  text-shadow: var(--font-shadow-color) 0px 1px;
}

.color-fade {
  transition: 0.25s color, 0.25s background, 0.25s text-shadow;
}
code {
  text-shadow: initial;
}

/* Links */

a {
  color: var(--link-color);
  text-decoration: underline;
}
a:hover {
  color: var(--link-highlight-color);
}


/* Headings */

h1, h2, h3, h4, h5 {
  font-family: 'Times New Roman', Times, serif;
  /* font-style: italic; */
}

h1 {
  font-size: 3em;
    font-variant: small-caps;
  font-style: normal;
}

h2 {
  font-size: 2em;
  font-variant: small-caps;
}

h3 {
  font-size: 1.2em;
}

/* Header */

.header {
  text-align: center;
  border-bottom: 1px solid;
}

.footer {
  border-top: 1px solid;
  padding-top: 1rem;
  font-style: italic;
}

.profile-pic {
  border-radius: 100%;
  border: 1px solid;
  margin: 0 auto;
  margin-right: 1rem;
  filter: grayscale(1);
}

[data-theme="dark"] .profile-pic {
  transition: 0.25s filter;
  filter: grayscale(0);
}


.nav-links {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(10rem, 1fr));
  justify-content: space-evenly;
}

.list-unstyled {
  list-style: none;
  margin-left: 0;
  padding-left: 0;
}

/* Dark theme toggle */

@media only screen and (min-width: 30rem) {
  .theme-switch {
    position: fixed;
    right: 1rem;
  }
}</style>
  <style>@import url(https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css);

:root {
  --prism-font-family: "Fira Code", Menlo, monospace;
  --prism-font-size: 0.9rem;
  --prism-foreground: #000000;
  --prism-background: #fbfbfb;
  --prism-comment: #4a534a;
  --prism-string: #c67b5d;
  --prism-literal: #3a9c9b;
  --prism-keyword: #248459;
  --prism-function: #849145;
  --prism-deleted: #a14f55;
  --prism-class: #2b91af;
  --prism-builtin: #a52727;
  --prism-property: #ad502b;
  --prism-namespace: #c96880;
  --prism-punctuation: #8e8f8b;
  --prism-decorator: #bd8f8f;
  --prism-json-property: #698c96;
}

[data-theme="dark"] {
  --prism-scheme: dark;
  --prism-foreground: #DBE9E7;
  --prism-background: #1C1D29;
  --prism-comment: #afb4cf;
  --prism-string: #FFD76D;
  --prism-literal: #C39AC9;
  --prism-keyword: #FF657A;
  --prism-function: #BAD761;
  --prism-deleted: #a14f55;
  --prism-class: #5ebaa8;
  --prism-builtin: #BAD761;
  --prism-property: #dd8e6e;
  --prism-namespace: #c96880;
  --prism-punctuation: #9eaaa8;
  --prism-decorator: #bd8f8f;
  --prism-regex: #ab5e3f;
  --prism-json-property: #6b8b9e;
  --prism-line-number: #888888;
  --prism-line-number-gutter: #eeeeee;
  --prism-line-highlight-background: #444444;
  --prism-selection-background: #181414;
}

[class*='language-'] {
  white-space: pre-wrap !important;
}

code {
  font-family: var(--prism-font-family);
  background-color: var(--prism-background);
  display: inline-block;
}</style>
  <!-- Devicon CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.8.2/devicon.min.css">
</head>

<body>
  
<header class="header">
<h1>Assignment 7</h1>
<p class="lead">A basic HTML + Python app, using Common Gateway Interface and the Apache HTTP Server.</p>
<ul class="nav-links list-unstyled">
  <li><a href=".."><span title="House emoji">üè†</span> Home</a></li>
  <li><a href="https://github.com/morellam-dev/cs-4720-internet-programming/tree/main/module-7"><i class="devicon-github-original" title="GitHub"></i> View code on GitHub</a></li>
</ul>
</header>

<main>
<h3>htdocs/form.html</h3>
<p><img src="screenshot-form.png" alt="A screenshot of the main form page"></p>
<pre class="language-html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Form for Python<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>styles.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=0.875<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css"><br>    <span class="token selector">form fieldset</span> <span class="token punctuation">{</span><br>      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid gray<span class="token punctuation">;</span><br>      <span class="token property">padding</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token selector">form fieldset[disabled]</span> <span class="token punctuation">{</span><br>      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> <span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token selector">form legend</span> <span class="token punctuation">{</span><br>      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--font-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token property">text-shadow</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>      <span class="token property">font-size</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span><br>      <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span><br>      <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Times New Roman'</span><span class="token punctuation">,</span> Times<span class="token punctuation">,</span> serif<span class="token punctuation">;</span><br>      <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span><br>      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>      <span class="token property">width</span><span class="token punctuation">:</span> unset<span class="token punctuation">;</span><br>      <span class="token property">margin</span><span class="token punctuation">:</span> 0 -1ch<span class="token punctuation">;</span><br>      <span class="token property">padding</span><span class="token punctuation">:</span> 0 1ch<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token selector">form label</span> <span class="token punctuation">{</span><br>      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token selector">form input[type="text"]</span> <span class="token punctuation">{</span><br>      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Python CGI Form Example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POST<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/cgi-bin/submit.py<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>Shipping information<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Name<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shipping-name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Zip code<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shipping-zip<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>postal-code<span class="token punctuation">"</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>billing-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>Billing information<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Billing information is the same? <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>billing-info-same<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Name<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>billing-name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">></span></span>Zip code<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>billing-zip<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">autocomplete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>postal-code<span class="token punctuation">"</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Calculate<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br>    <span class="token punctuation">{</span> <span class="token comment">// closure</span><br>      <span class="token comment">// select elements</span><br>      <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token string-property property">"shipping-name"</span><span class="token operator">:</span> shippingNameEl<span class="token punctuation">,</span> <span class="token string-property property">"shipping-zip"</span><span class="token operator">:</span> shippingZipEl<span class="token punctuation">,</span> <span class="token string-property property">"billing-name"</span><span class="token operator">:</span> billingNameEl<span class="token punctuation">,</span><br>        <span class="token string-property property">"billing-zip"</span><span class="token operator">:</span> billingZipEl<span class="token punctuation">,</span><br>        <span class="token string-property property">"billing-info-same"</span><span class="token operator">:</span> billingInfoSameEl<br>      <span class="token punctuation">}</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>elements<span class="token punctuation">;</span><br><br>      <span class="token keyword">function</span> <span class="token function">updateBillingInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// change placeholder text</span><br>        billingNameEl<span class="token punctuation">.</span>placeholder <span class="token operator">=</span> shippingNameEl<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>        billingZipEl<span class="token punctuation">.</span>placeholder <span class="token operator">=</span> shippingZipEl<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>        <span class="token comment">// disable inputs if checkbox checked</span><br>        billingNameEl<span class="token punctuation">.</span>disabled <span class="token operator">=</span> billingInfoSameEl<span class="token punctuation">.</span>checked<span class="token punctuation">;</span><br>        billingZipEl<span class="token punctuation">.</span>disabled <span class="token operator">=</span> billingInfoSameEl<span class="token punctuation">.</span>checked<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> updateBillingInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"form"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> updateBillingInfo<span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token function">updateBillingInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span> <span class="token comment">// end closure</span><br>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<style>
img {
  display: block;
  max-width: 80%;
  margin: 0 auto;
}
</style>
<h3>htdocs/cgi-bin/submit.py</h3>
<p><img src="screenshot-submit.png" alt="A screenshot of the form after submission"></p>
<pre class="language-py"><code class="language-py"><span class="token comment">#!/usr/bin/env python</span><br><br><span class="token keyword">import</span> os<br><span class="token keyword">import</span> cgi<br><span class="token keyword">import</span> io<br><span class="token keyword">import</span> cgitb<br><span class="token keyword">import</span> random<br>cgitb<span class="token punctuation">.</span>enable<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># uncomment for debugging</span><br><br>OUTFILE_NAME <span class="token operator">=</span> <span class="token string">"address.csv"</span><br><br><span class="token comment"># create CGI header</span><br><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Content-Type: text/html; charset=UTF-8"</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><br><span class="token comment"># get data from form submission</span><br>form <span class="token operator">=</span> cgi<span class="token punctuation">.</span>FieldStorage<span class="token punctuation">(</span><span class="token punctuation">)</span><br>order_num <span class="token operator">=</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">999999</span><span class="token punctuation">)</span><br>shipping_name <span class="token operator">=</span> form<span class="token punctuation">.</span>getfirst<span class="token punctuation">(</span><span class="token string">"shipping-name"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><br>shipping_zip <span class="token operator">=</span> form<span class="token punctuation">.</span>getfirst<span class="token punctuation">(</span><span class="token string">"shipping-zip"</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><br>billing_name <span class="token operator">=</span> form<span class="token punctuation">.</span>getfirst<span class="token punctuation">(</span><span class="token string">"billing-name"</span><span class="token punctuation">,</span> shipping_name<span class="token punctuation">)</span><br>billing_zip <span class="token operator">=</span> form<span class="token punctuation">.</span>getfirst<span class="token punctuation">(</span><span class="token string">"billing-zip"</span><span class="token punctuation">,</span> shipping_zip<span class="token punctuation">)</span><br><br><span class="token keyword">if</span> <span class="token keyword">not</span> shipping_name <span class="token keyword">and</span> billing_name<span class="token punctuation">:</span><br>   <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"&lt;h1>Error: Invalid data&lt;/h1>"</span></span><span class="token punctuation">)</span><br>   <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"&lt;p>Your order could not be completed.&lt;/p>"</span></span><span class="token punctuation">)</span><br>   exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><br><br><span class="token comment"># Create a file, if it</span><br><span class="token keyword">try</span><span class="token punctuation">:</span><br>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>OUTFILE_NAME<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> outfile<span class="token punctuation">:</span><br>        <span class="token comment"># write header</span><br>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"OrderNumber,ShippingName,ShippingZip,BillingName,BillingZip"</span><span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token operator">=</span>outfile<span class="token punctuation">)</span><br><span class="token keyword">except</span> <span class="token punctuation">(</span>FileExistsError<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token keyword">pass</span><br><br><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>OUTFILE_NAME<span class="token punctuation">,</span> <span class="token string">"a+"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> outfile<span class="token punctuation">:</span><br><br>    <span class="token keyword">print</span><span class="token punctuation">(</span>order_num<span class="token punctuation">,</span> shipping_name<span class="token punctuation">,</span> shipping_zip<span class="token punctuation">,</span> billing_name<span class="token punctuation">,</span> billing_zip<span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">","</span><span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token operator">=</span>outfile<span class="token punctuation">)</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><br><span class="token comment"># print to user</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"&lt;h1>Your order #</span><span class="token interpolation"><span class="token punctuation">{</span>order_num<span class="token punctuation">}</span></span><span class="token string"> was confirmed!&lt;/h1>"</span></span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"&lt;h2>Shipping info&lt;/h2>"</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"&lt;address></span><span class="token interpolation"><span class="token punctuation">{</span>shipping_name<span class="token punctuation">}</span></span><span class="token string">&lt;br></span><span class="token interpolation"><span class="token punctuation">{</span>shipping_zip<span class="token punctuation">}</span></span><span class="token string">&lt;/address>"</span></span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"&lt;h2>Billing info&lt;/h2>"</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"&lt;address></span><span class="token interpolation"><span class="token punctuation">{</span>billing_name<span class="token punctuation">}</span></span><span class="token string">&lt;br></span><span class="token interpolation"><span class="token punctuation">{</span>billing_zip<span class="token punctuation">}</span></span><span class="token string">&lt;/address>"</span></span><span class="token punctuation">)</span><br></code></pre>
<h3>htdocs/cgi-bin/dump_data.py</h3>
<p><img src="screenshot-dump.png" alt="A screenshot of the data dump"></p>
<pre class="language-py"><code class="language-py"><span class="token comment">#!/usr/bin/env python</span><br><br><span class="token keyword">import</span> cgi<br><span class="token keyword">import</span> cgitb<br><br>cgitb<span class="token punctuation">.</span>enable<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># uncomment for debugging</span><br><br>SUPER_SECRET_ADMIN_PASSWORD <span class="token operator">=</span> <span class="token string">"admin123"</span><br>OUTFILE_NAME <span class="token operator">=</span> <span class="token string">"address.csv"</span><br><br><span class="token comment"># create CGI header</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Content-Type: text/plain; charset=UTF-8"</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><br><span class="token comment"># get data from form submission</span><br>form <span class="token operator">=</span> cgi<span class="token punctuation">.</span>FieldStorage<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br><span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">.</span>getfirst<span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span> <span class="token operator">==</span> SUPER_SECRET_ADMIN_PASSWORD<span class="token punctuation">)</span><span class="token punctuation">:</span><br>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>OUTFILE_NAME<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> address_file<span class="token punctuation">:</span><br>        <span class="token keyword">print</span><span class="token punctuation">(</span>address_file<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token keyword">else</span><span class="token punctuation">:</span><br>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Invalid password."</span><span class="token punctuation">)</span><br><br></code></pre>

</main>
  <footer class="footer">
    <p>Copyright ¬© 2022 Mae Morella</p>
  </footer>
  <script>// "Dark/Light Mode Switch with CSS Variables" by Ananya Neogi
// https://dev.to/ananyaneogi/create-a-dark-light-mode-switch-with-css-variables-34l8

//determines if the user has a set theme
function detectColorScheme() {
  var theme = "light"; //default to light

  //local storage is used to override OS theme settings
  if (localStorage.getItem("theme")) {
    if (localStorage.getItem("theme") == "dark") {
      var theme = "dark";
    }
  } else if (!window.matchMedia) {
    //matchMedia method not supported
    return false;
  } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
    //OS theme setting detected as dark
    var theme = "dark";
  }

  //dark theme preferred, set document with a `data-theme` attribute
  if (theme == "dark") {
    document.documentElement.setAttribute("data-theme", "dark");
  }
}
detectColorScheme();

const toggleSwitchLabel = document.createElement("label");
toggleSwitchLabel.id = "theme-switch"
toggleSwitchLabel.className = "theme-switch"
toggleSwitchLabel.setAttribute("for", "checkbox_theme")
toggleSwitchLabel.innerHTML = `<input type="checkbox" id="checkbox_theme"> Toggle dark mode`
document.body.prepend(toggleSwitchLabel);

//identify the toggle switch HTML element
const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');

//function that changes the theme, and sets a localStorage variable to track the theme between page loads
function switchTheme(e) {
  document.body.classList.add("color-fade");
  // toggleSwitch.disabled = true;
  // setTimeout(() => { toggleSwitch.disabled = false }, 250)
  if (e.target.checked) {
    localStorage.setItem('theme', 'dark');
    document.documentElement.setAttribute('data-theme', 'dark');
    e.target.checked = true;
  } else {
    localStorage.setItem('theme', 'light');
    document.documentElement.setAttribute('data-theme', 'light');
    e.target.checked = false;
  }
}

//listener for changing themes
toggleSwitch.addEventListener('change', switchTheme, false);

//pre-check the dark-theme checkbox if dark-theme is set
if (document.documentElement.getAttribute("data-theme") == "dark") {
  toggleSwitch.checked = true;
}</script>
</body>

</html>

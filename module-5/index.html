<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>MM | Assignment 5</title>
  <meta name="description" content="">
  <meta name="author" content="Mae Morella">
  <!-- Reboot.css -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-reboot@4.5.4/dist/reboot.min.css">
  <!-- Module 1 stylesheet -->
  <link rel="stylesheet" href="../module-1/styles.css">
  <!-- PrismJS stylesheet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-theme-vars/base.css">
  <link rel="stylesheet" href="../module-3/prism-vars-color.css">
  <style>
    code[class*=language-] {
      font-size: 0.875rem !important;
      line-height: 1;
      white-space: pre-wrap;
    }
  </style>
  <style>
    .dirtree .folder {
      list-style-type: 'üìÅ';
    }

    .dirtree .file {
      list-style-type: 'üìÑ';
    }
  </style>
</head>

<body>
  <header class="header">
  <h1>Assignment 5</h1>
      <ul class="nav-links list-unstyled">
        <li><a href="../module-1/">Home</a></li>
      </ul>
    <p class="lead">
  </header>
  <main>
    <h2>HTTP Client in Python</h2>
    <a href="https://github.com/morellam-dev/cs-4720-internet-programming/tree/main/module-5/curly.py"><i
        class="devicon-github-original" title="GitHub"></i> View code on GitHub</a>
    <!-- File directory tree-->
    <h3>Output</h3>
    <pre><code class="language-bash">$ ./curly.py --help
# usage: curly.py [-h] [-v] URL [file]
#
# Retrieves a single webpage, and writes it to a file.
#
# positional arguments:
#   URL A URL to send a request to
#   file Output file to write to.
#
# optional arguments:
#   -h, --help show this help message and exit
#   -v, --verbose Prints connection headers</code></pre>
    <pre><code class="language-bash">$ ./curly.py https://kennesaw.edu/ out.html
# Writing response data to out.html (31771 bytes)
$ cat out.html
# &lt;!DOCTYPE html&gt;
# &lt;html lang="en" id="_63608cfd-163b-4208-b021-dd4e916bb815"&gt;
# &lt;head&gt;
#  &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
#  &lt;title&gt;Kennesaw State University in Georgia&lt;/title&gt;</code></pre>
    <pre><code class="language-bash">$ ./curly.py https://placekitten.com/300/300 kitten.jpg
# Writing response data to kitten.jpg (8425 bytes)
$ imgcat kitten.jpg
</code>
<img src="kitten.jpg" alt="an image of a kitten"></pre>

    <h3>curly.py</h3>
    <pre><code class="language-python">#! /usr/bin/env python
# File: curly.py
# Author: Mae Morella
#
# A very simple HTTPS client, using the Python requests module
# Extends the code in requests_client.py

import sys
import requests
import argparse
import logging
import pprint

# Take URL and file input by parsing command-line args

parser = argparse.ArgumentParser(
    description='Retrieves a single webpage, and writes it to a file.')
parser.add_argument('-v', '--verbose', action='store_true',
                    help="Prints connection headers")
parser.add_argument('url', metavar="URL", type=str,
                    help='A URL to send a request to')
parser.add_argument('file', nargs="?", help='Output file to write to.',
                    type=argparse.FileType('wb'), default=sys.stdout)

args = parser.parse_args()
url = args.url
outfile = args.file

logging.basicConfig(format="",
                    level=(logging.DEBUG if args.verbose else logging.INFO))

try:
    # Send HTTP GET request
    res = requests.get(url)

    # Print debug info
    elapsed_ms = int(res.elapsed.total_seconds() * 1000)
    logging.debug(
        f"Got response status {res.status_code} in {elapsed_ms} ms")
    logging.debug(res.headers)
    # for stdout, decode response
    if (outfile is sys.stdout):
      print(res.text)
    else:
      logging.info(
          f"Writing response data to {outfile.name} ({len(res.content)} bytes)")
      outfile.write(res.content)
    sys.exit(0)
except Exception as e:
    print("ERR:", e, file=sys.stderr)
    sys.exit(1)</code></pre>
  </main>


  <script src="../module-1/dark.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"
    integrity="sha512-xR+IAyN+t9EBIOOJw5m83FTVMDsPd63IhJ3ElP4gmfUFnQlX9+eWGLp3P4t3gIjpo2Z1JzqtW/5cjgn+oru3yQ=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"
    integrity="sha512-zc7WDnCM3aom2EziyDIRAtQg1mVXLdILE09Bo+aE1xk0AM2c2cVLfSW9NrxE5tKTX44WBY0Z2HClZ05ur9vB6A=="
    crossorigin="anonymous"></script>
</body>

</html>